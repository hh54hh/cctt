# ๐ ุฏููู ุฅุนุฏุงุฏ Supabase ููุธุงู ุญุณุงู ุฌู

## โ ุงูุชุญูู ูู ุงูุฅุนุฏุงุฏ ุงูุตุญูุญ

### 1. ูุญุต ุงูุงุชุตุงู

ุจุนุฏ ุชุดุบูู ุงูุชุทุจููุ ุชุญูู ูู ูุญุฏุฉ ุงูุชุญูู (Console) ููุฑุณุงุฆู ุงูุชุงููุฉ:

```
๐ ูุญุต ุณุฑูุน ูู Supabase...
โ Supabase ุฌุงูุฒ ููุงุณุชุฎุฏุงู
๐ ุงูุฌุฏุงูู ุงููุชุงุญุฉ: subscribers, course_points, diet_items, groups, group_items, products, sales, sale_items, access_keys
๐ ุชููุฆุฉ ูุธุงู ุญุณุงู ุฌู...
โ ุชู ุชููุฆุฉ ุงููุธุงู ุจูุฌุงุญ
```

### 2. ูู ุญุงูุฉ ุธููุฑ ุฑุณุงุฆู ุฎุทุฃ

ุฅุฐุง ุธูุฑุช ุฑุณุงุฆู ูุซู:

```
๏ฟฝ๏ฟฝ ูุดุงูู ูู Supabase:
  - ุงูุฌุฏูู subscribers ุบูุฑ ููุฌูุฏ
  - ุฎุทุฃ ูู ุงูุงุชุตุงู: relation "subscribers" does not exist
```

## ๐ง ุฎุทูุงุช ุงูุฅุตูุงุญ

### ุงูุฎุทูุฉ 1: ุชูููุฐ ุณูุฑุจุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

1. ุงูุชูู ุฅูู [Supabase Dashboard](https://app.supabase.com)
2. ุงุฎุชุฑ ูุดุฑูุนู
3. ุงูุชูู ุฅูู **SQL Editor**
4. ุงูุณุฎ ูุญุชูู ููู `database/schema.sql` ุฃู `database/additional_functions.sql`
5. ุงูุตู ุงูููุฏ ูู SQL Editor
6. ุงุถุบุท **Run** ูุชูููุฐ ุงูุณูุฑุจุช

### ุงูุฎุทูุฉ 2: ุงูุชุญูู ูู ุงูุฌุฏุงูู

1. ุงูุชูู ุฅูู **Database** โ **Tables**
2. ุชุฃูุฏ ูู ูุฌูุฏ ุงูุฌุฏุงูู ุงูุชุงููุฉ:
   - โ subscribers
   - โ course_points
   - โ diet_items
   - โ groups
   - โ group_items
   - โ products
   - โ sales
   - โ sale_items
   - โ access_keys

### ุงูุฎุทูุฉ 3: ุชุญุฏูุซ ููุงุชูุญ Supabase

ูู ููู `src/lib/supabase.ts`:

```typescript
const supabaseUrl = "https://[YOUR-PROJECT-ID].supabase.co";
const supabaseKey = "[YOUR-ANON-KEY]";
```

ุงุญุตู ุนูู ูุฐู ุงููุนูููุงุช ูู:
**Settings** โ **API** ูู Supabase Dashboard

## ๐ ุฅุนุฏุงุฏ ุงูุฃูุงู (RLS)

### ุงูุชุญูู ูู Row Level Security

1. ุงูุชูู ุฅูู **Authentication** โ **Policies**
2. ุชุฃูุฏ ูู ูุฌูุฏ ุณูุงุณุฉ "Allow all access" ููู ุฌุฏูู
3. ุฅุฐุง ูู ุชูู ููุฌูุฏุฉุ ุฃุถููุง ูุฏููุงู:

```sql
-- ููู ุฌุฏูู
CREATE POLICY "Allow all access" ON [table_name] FOR ALL USING (true);
```

## ๐ ุงูุชุญูู ูู ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ

### ุชุฃูุฏ ูู ูุฌูุฏ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ:

```sql
-- ุงูุชุญูู ูู ุฃููุงุฏ ุงูุฏุฎูู
SELECT * FROM access_keys;

-- ุงูุชุญูู ูู ุงูุชูุงุฑูู
SELECT * FROM course_points;

-- ุงูุชุญูู ูู ุงูุนูุงุตุฑ ุงูุบุฐุงุฆูุฉ
SELECT * FROM diet_items;

-- ุงูุชุญูู ูู ุงูููุชุฌุงุช
SELECT * FROM products;
```

## ๐ ุงุฎุชุจุงุฑ ุงููุฒุงููุฉ

### 1. ูุญุต ุญุงูุฉ ุงููุฒุงููุฉ ูู ุงูุชุทุจูู

- ุงูุธุฑ ุฅูู ูููู "ุญุงูุฉ ุงููุฒุงููุฉ" ูู ููุญุฉ ุงูุชุญูู
- ูุฌุจ ุฃู ูุธูุฑ "ูุชุฒุงูู" ุจุงูููู ุงูุฃุฎุถุฑ

### 2. ุงุฎุชุจุงุฑ ุงูุนูู ุจุฏูู ุฅูุชุฑูุช

1. ุงูุตู ุงูุฅูุชุฑูุช
2. ุฃุถู ูุดุชุฑู ุฌุฏูุฏ
3. ุชุญูู ูู ุธููุฑ "X ุชุบููุฑ ูู ุงูุงูุชุธุงุฑ"
4. ุฃุนุฏ ุงูุงุชุตุงู ุจุงูุฅูุชุฑูุช
5. ูุฌุจ ุฃู ุชุชู ุงููุฒุงููุฉ ุชููุงุฆูุงู

### 3. ุงุฎุชุจุงุฑ ุงููุฒุงููุฉ ุงููุฏููุฉ

- ุงุถุบุท ุนูู ุฒุฑ ุงูุณุญุงุจุฉ ูู ูู๏ฟฝ๏ฟฝู ุงููุฒุงููุฉ
- ุชุฃูุฏ ูู ุนุฏู ุธููุฑ ุฃุฎุทุงุก ูู Console

## ๐จ ุญู ุงููุดุงูู ุงูุดุงุฆุนุฉ

### ูุดููุฉ 1: "CORS policy blocked"

**ุงูุญู:**

1. ุงูุชูู ุฅูู **Settings** โ **API**
2. ุชุฃูุฏ ูู ุฅุถุงูุฉ ูุทุงูู ูู **Allowed origins**
3. ุฃู ุฃุถู `*` ููุณูุงุญ ุจุฌููุน ุงููุทุงูุงุช (ููุชุทููุฑ ููุท)

### ูุดููุฉ 2: "Invalid API key"

**ุงูุญู:**

1. ุชุญูู ูู ุตุญุฉ `SUPABASE_URL` ู `SUPABASE_ANON_KEY`
2. ุชุฃูุฏ ูู ุนุฏู ูุฌูุฏ ูุณุงูุงุช ุฅุถุงููุฉ
3. ุชุฃูุฏ ูู ุฃู ุงูููุชุงุญ ูู ููุชู

### ูุดููุฉ 3: "Table doesn't exist"

**ุงูุญู:**

1. ุชูููุฐ ุณูุฑุจุช `database/schema.sql` ูุฑุฉ ุฃุฎุฑู
2. ุงูุชุญูู ูู ุตุญุฉ ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. ุชุฃูุฏ ูู ุฃู ุงููุดุฑูุน ูุดุท ูู Supabase

### ูุดููุฉ 4: "Permission denied"

**ุงูุญู:**

1. ุชูุนูู RLS policies
2. ุฅุถุงูุฉ ุณูุงุณุฉ "Allow all" ููู ุฌุฏูู
3. ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู

## ๐ ุฃุฏูุงุช ุงูุชุดุฎูุต

### ูู ูุญุฏุฉ ุงูุชุญูู (Console)

```javascript
// ูุญุต ุณุฑูุน ููุงุชุตุงู
quickSupabaseCheck();

// ุนุฑุถ ุงูุชุบููุฑุงุช ุงููุนููุฉ
console.log("ุชุบููุฑุงุช ูุนููุฉ:", db.getPendingChangesCount());

// ูุญุต ุงูุจูุงูุงุช ุงููุญููุฉ
console.log("ูุดุชุฑููู ูุญูููู:", db.getSubscribers().length);

// ูุฒุงููุฉ ูุฏููุฉ
db.syncAllToSupabase();
```

### ูู Supabase Dashboard

1. **Logs** - ูุฑุคูุฉ ุงูุฃุฎุทุงุก ุงูููุตูุฉ
2. **Database** โ **Logs** - ููุญุต ุงุณุชุนูุงูุงุช SQL
3. **API** โ **Logs** - ููุฑุงูุจุฉ ุทูุจุงุช API

## โ ูุงุฆูุฉ ุงูุชุญูู ุงูููุงุฆูุฉ

- [ ] Supabase project ููุดุฃ ููุดุท
- [ ] ุฌููุน ุงูุฌุฏุงูู (9 ุฌุฏุงูู) ููุฌูุฏุฉ
- [ ] ููุงุชูุญ API ุตุญูุญุฉ ููุญุฏุซุฉ
- [ ] RLS policies ููุนูุฉ ูุน "Allow all"
- [ ] ุจูุงูุงุช ุชุฌุฑูุจูุฉ ููุฌูุฏุฉ (ุฃููุงุฏ ุฏุฎููุ ุชูุงุฑููุ ููุชุฌุงุช)
- [ ] ูููู ุงููุฒุงููุฉ ูุธูุฑ "ูุชุฒุงูู"
- [ ] ุงุฎุชุจุงุฑ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ูุนูู
- [ ] ูุฒุงููุฉ offline/online ุชุนูู

## ๐ ุงูุญุตูู ุนูู ุงููุณุงุนุฏุฉ

ุฅุฐุง ูุงุฌูุช ูุดุงูู ูุณุชูุฑุฉ:

1. **ูุญุต Logs ูู Supabase Dashboard**
2. **ูุฑุงุฌุนุฉ Network tab ูู Developer Tools**
3. **ุชุดุบูู `quickSupabaseCheck()` ูู Console**
4. **ุงูุชุฃูุฏ ูู ุฃู ุงููุดุฑูุน ูู ูุชู ุฅููุงูู ูู Supabase**

---

**ุงููุธุงู ุงูุขู ุฌุงูุฒ ููุนูู ูุน Supabase ุจุงููุงูู! ๐**

ุฌููุน ุงูุนูููุงุช ุณุชูุญูุธ ุชููุงุฆูุงู ูู ุงูุณุญุงุจุฉ ูุน ุฅููุงููุฉ ุงูุนูู ุจุฏูู ุฅูุชุฑูุช.
