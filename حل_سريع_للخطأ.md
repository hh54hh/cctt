# ๐จ ุญู ุณุฑูุน ูุฎุทุฃ ูุงุนุฏุฉ ุงูุจูุงูุงุช

## ุงููุดููุฉ:

```
ERROR: 42P10: there is no unique or exclusion constraint matching the ON CONFLICT specification
```

## ุงูุญู ุงูุณุฑูุน:

### 1๏ธโฃ ุงูุชุญ Supabase

- ุงุฐูุจ ุฅูู [supabase.com/dashboard](https://supabase.com/dashboard)
- ุงูุชุญ ูุดุฑูุนู

### 2๏ธโฃ ุงูุชูู ุฅูู SQL Editor

- ุงุถุบุท ุนูู "SQL Editor" ูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ

### 3๏ธโฃ ุงูุณุฎ ูุงูุตู ูุฐุง ุงูุณูุฑุจุช ุงูููุญุฏูุซ:

```sql
-- ๐๏ธ ุณูุฑุจุช ูุจุณุท ูุฅุนุฏุงุฏ ุตุงูุฉ ุญุณุงู (ูุนูู ุฏุงุฆูุงู)

-- 1. ุฅูุดุงุก ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ
CREATE TABLE IF NOT EXISTS subscribers (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    name TEXT NOT NULL,
    age INTEGER NOT NULL CHECK (age > 0 AND age < 150),
    weight DECIMAL(5,2) NOT NULL CHECK (weight > 0),
    height DECIMAL(5,2) NOT NULL CHECK (height > 0),
    phone TEXT NOT NULL,
    notes TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS groups (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    subscriber_id UUID NOT NULL REFERENCES subscribers(id) ON DELETE CASCADE,
    title TEXT,
    type TEXT NOT NULL CHECK (type IN ('course', 'diet')),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS group_items (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    group_id UUID NOT NULL REFERENCES groups(id) ON DELETE CASCADE,
    name TEXT NOT NULL,
    order_index INTEGER DEFAULT 0
);

CREATE TABLE IF NOT EXISTS course_points (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    name TEXT NOT NULL UNIQUE,
    description TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS diet_items (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    name TEXT NOT NULL UNIQUE,
    description TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- 2. ุฅุฏุฑุงุฌ ุงูุจูุงูุงุช ุงูุฃูููุฉ (ูุน ุญูุงูุฉ ูู ุงูุชูุฑุงุฑ)
DO $$
BEGIN
    IF NOT EXISTS (SELECT 1 FROM course_points LIMIT 1) THEN
        INSERT INTO course_points (name, description) VALUES
        ('ุจูุด ุจุฑุณ', 'ุชูุฑูู ุฃุณุงุณู ูุนุถูุงุช ุงูุตุฏุฑ'),
        ('ุณููุงุช', 'ุชูุฑูู ุดุงูู ูุนุถูุงุช ุงูุฃุฑุฌู'),
        ('ุฏูุฏ ูููุช', 'ุชูุฑูู ููู ูุนุถูุงุช ุงูุธูุฑ'),
        ('ุดุฏ ุนููู', 'ุชูุฑูู ูุนุถูุงุช ุงูุธูุฑ ูุงูุจุงู'),
        ('ุถุบุท ูุชู', 'ุชูุฑูู ูุนุถูุงุช ุงููุชู'),
        ('ูุงุฑุฏูู', 'ุชูุงุฑูู ุงูููุจ ูุงูุฃูุนูุฉ ุงูุฏูููุฉ'),
        ('ุชูุงุฑูู ุงูุจุทู', 'ุชูุงุฑูู ุนุถูุงุช ุงูุจุทู'),
        ('ุจุงู ุณุจุณ', 'ุชูุฑูู ููุนุถูุฉ ุฐุงุช ุงูุฑุฃุณูู');
    END IF;
END $$;

DO $$
BEGIN
    IF NOT EXISTS (SELECT 1 FROM diet_items LIMIT 1) THEN
        INSERT INTO diet_items (name, description) VALUES
        ('ุจูุถ ูุณููู', 'ูุตุฏุฑ ููุชุงุฒ ููุจุฑูุชูู'),
        ('ุดููุงู', 'ูุฑุจูููุฏุฑุงุช ูุนูุฏุฉ ูุฃููุงู'),
        ('ุฏุฌุงุฌ ูุดูู', 'ุจุฑูุชูู ุฎุงูู ูู ุงูุฏููู'),
        ('ุฃุฑุฒ ุจูู', 'ูุฑุจูููุฏุฑุงุช ุตุญูุฉ'),
        ('ุฎุถุฑูุงุช ูุฑููุฉ', 'ููุชุงูููุงุช ููุนุงุฏู'),
        ('ุชูุฑ', 'ุณูุฑูุงุช ุทุจูุนูุฉ ุณุฑูุนุฉ'),
        ('ููุฒ', 'ุฏููู ุตุญูุฉ ูุจุฑูุชูู ูุจุงุชู'),
        ('ุญููุจ ุฎุงูู ุงูุฏุณู', 'ูุงูุณููู ูุจุฑูุชูู');
    END IF;
END $$;

-- 3. ุชุนุทูู Row Level Security ููุจุณุงุทุฉ
ALTER TABLE subscribers DISABLE ROW LEVEL SECURITY;
ALTER TABLE groups DISABLE ROW LEVEL SECURITY;
ALTER TABLE group_items DISABLE ROW LEVEL SECURITY;
ALTER TABLE course_points DISABLE ROW LEVEL SECURITY;
ALTER TABLE diet_items DISABLE ROW LEVEL SECURITY;

-- โ ุชู ุงูุงูุชูุงุก!
```

### 4๏ธโฃ ุงุถุบุท Run

- ุงุถุบุท ุนูู ุงูุฒุฑ ุงูุฃุฎุถุฑ "Run" ุฃู Ctrl+Enter

### 5๏ธโฃ ุฃุนุฏ ุชุญููู ุงููุธุงู

- ุงุฑุฌุน ูููุธุงู ูุงุถุบุท F5
- ุฃู ุงุถุบุท ุฒุฑ "ุฅุนุงุฏุฉ ุงููุญุงููุฉ"

## โ ุนูุงูุงุช ุงููุฌุงุญ:

- ุงุฎุชูุงุก ุฑุณุงูุฉ ุงูุฎุทุฃ
- ุธููุฑ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
- ูุฌูุฏ ุชูุงุฑูู ูุฃุทุนูุฉ ูู ุงููุธุงู

## ๐ ุฅุฐุง ุงุณุชูุฑ ุงูุฎุทุฃ:

1. ุชุฃูุฏ ูู ูุณุฎ ุงูุณูุฑุจุช ูุงููุงู
2. ุชุฃูุฏ ูู ุงูุถุบุท ุนูู "Run"
3. ุงูุชุธุฑ ุญุชู ููุชูู ุงูุชูููุฐ (ุณุชุธูุฑ ุฑุณุงูุฉ "Success")
4. ุฃุนุฏ ุชุญููู ุงูุตูุญุฉ

---

**ุงูุณูุฑุจุช ุงูุฌุฏูุฏ ูุณุชุฎุฏู ุทุฑููุฉ ุขููุฉ ูุชุฌูุจ ุชูุฑุงุฑ ุงูุจูุงูุงุช! ๐**
